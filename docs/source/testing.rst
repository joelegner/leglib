.. _testing:

Testing
=======

.. _executing-tests:

Executing Tests
---------------

.. index::
   single: testing

The intent is for all code in `leglib` to be tested.  A `.PHONY` makefile target has been created so that testing can be performed as easily as this::

   $ make test

.. _coverage-results:

Coverage Results
----------------

.. index::
   single: coverage

The leglib docs use `Coverage <http://nedbatchelder.com/code/coverage/>`_ to
check testing coverage.  Coverage data is created when ``make test`` is
executed.  After the data is created, the following is generated by:

.. code-block:: bash

   $ cd PATH-TO/leglib
   $ coverage report >> docs/source/coverage.txt

.. literalinclude:: coverage.txt

For detailed coverage results, see ``leglib/docs/coverage/index.html``.

Excluding Code from Coverage
----------------------------

.. index::
   single: coverage; excluding code
   single: coverage; pragma
   single: excluding code from coverage
   single: pragma

Code can be excluded from :ref:`coverage-results` by adding ``# pragma: no cover`` like this:

.. code-block:: python

   if __name__ == "main":  # pragma: no cover
       print "Neither this line nor the previous one will be included in coverage results."

See http://nedbatchelder.com/code/coverage/excluding.html.

Makefile Listing
----------------

.. index::
   double: testing; makefile

.. literalinclude:: ../../Makefile
   :language: makefile
